{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FABIARIAS\\\\Desktop\\\\Sprint5\\\\appfrontend\\\\src\\\\components\\\\FacturasCrear.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class FacturasCrear extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      idfactura: '',\n      fecha: new Date(),\n      identificacion: '',\n      nombre: '',\n      ciudad: '',\n      telefono: '',\n      idproducto: '',\n      cantidad: '',\n      precio: '',\n      userSelected: '',\n      users: [],\n      editing: false,\n      _id: ''\n    };\n\n    this.onSubmit = async e => {\n      e.preventDefaul();\n\n      if (this.state.editing) {\n        const updatedFactura = {\n          idfactura: this.state.idfactura,\n          fecha: this.state.fecha,\n          identificacion: this.state.identificacion,\n          nombre: this.state.nombre,\n          ciudad: this.state.ciudad,\n          telefono: this.state.telefono,\n          idproducto: this.state.idproducto,\n          cantidad: this.state.cantidad,\n          precio: this.state.precio\n        };\n        await axios.put('http://localhost:4000/api/facturas/' + this.state._id, updatedFactura);\n      } else {\n        const newFactura = {\n          idfactura: this.state.idfactura,\n          fecha: this.state.fecha,\n          identificacion: this.state.identificacion,\n          nombre: this.state.nombre,\n          ciudad: this.state.ciudad,\n          telefono: this.state.telefono,\n          idproducto: this.state.idproducto,\n          cantidad: this.state.cantidad,\n          precio: this.state.precio\n        };\n        axios.post('http://localhost:4000/api/facturas', newFactura);\n      }\n\n      window.location.href = '/';\n    };\n\n    this.onInputChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.onChangeDate = fecha => {\n      this.setState({\n        fecha\n      });\n    };\n  }\n\n  async componentDidMount() {\n    const res = await axios.get('http://localhost:4000/api/users');\n\n    if (res.data.length > 0) {\n      this.setState({\n        users: res.data.map(user => user.nombres),\n        userSelected: res.data[0].nombres\n      });\n    }\n\n    if (this.props.match.params.id) {\n      console.log(this.props.match.params.id);\n      const res = await axios.get('http://localhost:4000/api/facturas/' + this.props.match.params.id);\n      console.log(res.data);\n      this.setState({\n        idfactura: res.data.idfactura,\n        fecha: new Date(res.data.fecha),\n        identificacion: res.data.identificacion,\n        nombre: res.data,\n        _id: res.data._id,\n        editing: true\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"CREAR FACTURAS \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"vendedor\",\n            children: \"Vendedor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control\",\n            value: this.state.userSelected,\n            onChange: this.onInputChange,\n            name: \"userSelected\",\n            id: \"vendedor\",\n            required: true,\n            children: this.state.users.map(user => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: user,\n              children: user\n            }, user, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"factura\",\n            children: \"Factura\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            class: \"form-control\",\n            value: this.state.fac,\n            onChange: this.onInputChange,\n            id: \"identificacion\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"fecha\",\n            children: \"Fecha\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n            className: \"form-form-control\",\n            selected: this.state.fecha,\n            onChange: this.onChangeDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"identificacion\",\n            children: \"identificacion\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            class: \"form-control\",\n            value: this.state.identificacion,\n            onChange: this.onInputChange,\n            id: \"identificacion\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"nombre\",\n            children: \"Nombre Cliente\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            class: \"form-control\",\n            value: this.state.nombre,\n            onChange: this.onInputChange,\n            id: \"nombre\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"ciudad\",\n            children: \"Ciudad\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            class: \"form-control\",\n            value: this.state.ciudad,\n            onChange: this.onInputChange,\n            id: \"ciudad\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"telefono\",\n            children: \"Tel\\xE9fono\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            class: \"form-control\",\n            value: this.state.telefono,\n            onChange: this.onInputChange,\n            id: \"telefono\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"idproducto\",\n            children: \"ID Producto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            class: \"form-control\",\n            value: this.state.idproducto,\n            onChange: this.onInputChange,\n            id: \"idproducto\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"cantidad\",\n            children: \"Cantidad\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            class: \"form-control\",\n            value: this.state.cantidad,\n            onChange: this.onInputChange,\n            id: \"cantidad\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"precio\",\n            children: \"Precio de venta\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            class: \"form-control\",\n            value: this.state.precio,\n            onChange: this.onInputChange,\n            id: \"precio\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.onSubmit,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary\",\n            children: \"Grabar Factura\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/FABIARIAS/Desktop/Sprint5/appfrontend/src/components/FacturasCrear.js"],"names":["React","Component","axios","DatePicker","FacturasCrear","state","idfactura","fecha","Date","identificacion","nombre","ciudad","telefono","idproducto","cantidad","precio","userSelected","users","editing","_id","onSubmit","e","preventDefaul","updatedFactura","put","newFactura","post","window","location","href","onInputChange","setState","target","id","value","onChangeDate","componentDidMount","res","get","data","length","map","user","nombres","props","match","params","console","log","render","fac"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\n\r\n\r\nexport default class FacturasCrear extends Component {\r\n\r\n\r\n    state = {\r\n        idfactura: '',\r\n        fecha: new Date(),\r\n        identificacion: '',\r\n        nombre: '',\r\n        ciudad: '',\r\n        telefono: '',\r\n        idproducto: '',\r\n        cantidad: '',\r\n        precio: '',\r\n        userSelected: '',\r\n        users: [],\r\n        editing: false,\r\n        _id: ''\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const res = await axios.get('http://localhost:4000/api/users');\r\n        if (res.data.length > 0) {\r\n            this.setState({\r\n                users: res.data.map(user => user.nombres),\r\n                userSelected: res.data[0].nombres\r\n            })\r\n        }\r\n        if (this.props.match.params.id) {\r\n            console.log(this.props.match.params.id)\r\n            const res = await axios.get('http://localhost:4000/api/facturas/' + this.props.match.params.id);\r\n            console.log(res.data)\r\n            this.setState({\r\n                idfactura: res.data.idfactura,\r\n                fecha: new Date(res.data.fecha),\r\n                identificacion: res.data.identificacion,\r\n                nombre: res.data,\r\n                _id: res.data._id,\r\n                editing: true\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n\r\n    onSubmit = async (e) => {\r\n        e.preventDefaul();\r\n        if (this.state.editing) {\r\n            const updatedFactura = {\r\n                idfactura: this.state.idfactura,\r\n                fecha: this.state.fecha,\r\n                identificacion: this.state.identificacion,\r\n                nombre: this.state.nombre,\r\n                ciudad: this.state.ciudad,\r\n                telefono: this.state.telefono,\r\n                idproducto: this.state.idproducto,\r\n                cantidad: this.state.cantidad,\r\n                precio: this.state.precio\r\n\r\n            };\r\n            await axios.put('http://localhost:4000/api/facturas/' + this.state._id, updatedFactura);\r\n        } else {\r\n            const newFactura = {\r\n                idfactura: this.state.idfactura,\r\n                fecha: this.state.fecha,\r\n                identificacion: this.state.identificacion,\r\n                nombre: this.state.nombre,\r\n                ciudad: this.state.ciudad,\r\n                telefono: this.state.telefono,\r\n                idproducto: this.state.idproducto,\r\n                cantidad: this.state.cantidad,\r\n                precio: this.state.precio\r\n            };\r\n            axios.post('http://localhost:4000/api/facturas', newFactura);\r\n        }\r\n        window.location.href = '/';\r\n\r\n    }\r\n\r\n    onInputChange = (e) => {\r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        })\r\n    }\r\n\r\n    onChangeDate = fecha => {\r\n        this.setState({ fecha });\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"col-md-12\">\r\n                <div className=\"card card-body\">\r\n                    <h4>CREAR FACTURAS </h4>\r\n                    {/** SELECCIONE VENDEDOR */}\r\n                    <div className=\"form-group\">\r\n                        <label for=\"vendedor\">Vendedor</label>\r\n                        <select className=\"form-control\"\r\n                            value={this.state.userSelected}\r\n                            onChange={this.onInputChange}\r\n                            name=\"userSelected\" id=\"vendedor\" required>\r\n                            {\r\n                                this.state.users.map(user => (\r\n                                    <option key={user} value={user}>\r\n                                        {user}\r\n                                    </option>\r\n                                ))\r\n                            }\r\n\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"factura\">Factura</label>\r\n                        <input type=\"text\" class=\"form-control\"\r\n                            value={this.state.fac}\r\n                            onChange={this.onInputChange}\r\n                            id=\"identificacion\"\r\n                            required />\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"fecha\">Fecha</label>\r\n                        <DatePicker\r\n                            className=\"form-form-control\" selected={this.state.fecha} onChange={this.onChangeDate} />\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"identificacion\">identificacion</label>\r\n                        <input type=\"text\" class=\"form-control\"\r\n                            value={this.state.identificacion}\r\n                            onChange={this.onInputChange}\r\n                            id=\"identificacion\"\r\n                            required />\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"nombre\">Nombre Cliente</label>\r\n                        <input type=\"text\" class=\"form-control\"\r\n                            value={this.state.nombre}\r\n                            onChange={this.onInputChange}\r\n                            id=\"nombre\"\r\n                            required />\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"ciudad\">Ciudad</label>\r\n                        <input type=\"text\" class=\"form-control\"\r\n                            value={this.state.ciudad}\r\n                            onChange={this.onInputChange}\r\n                            id=\"ciudad\"\r\n                            required />\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"telefono\">Tel√©fono</label>\r\n                        <input type=\"text\" class=\"form-control\"\r\n                            value={this.state.telefono}\r\n                            onChange={this.onInputChange}\r\n                            id=\"telefono\"\r\n                            required />\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"idproducto\">ID Producto</label>\r\n                        <input type=\"text\" class=\"form-control\"\r\n                            value={this.state.idproducto}\r\n                            onChange={this.onInputChange}\r\n                            id=\"idproducto\"\r\n                            required />\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"cantidad\">Cantidad</label>\r\n                        <input type=\"text\" class=\"form-control\"\r\n                            value={this.state.cantidad}\r\n                            onChange={this.onInputChange}\r\n                            id=\"cantidad\"\r\n                            required />\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"precio\">Precio de venta</label>\r\n                        <input type=\"text\" class=\"form-control\"\r\n                            value={this.state.precio}\r\n                            onChange={this.onInputChange}\r\n                            id=\"precio\"\r\n                            required />\r\n                    </div>\r\n\r\n\r\n                    <form onSubmit={this.onSubmit}>\r\n\r\n                        <button type=\"submit\" className=\"btn btn-primary\">\r\n                            Grabar Factura\r\n                        </button>\r\n\r\n                    </form>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}