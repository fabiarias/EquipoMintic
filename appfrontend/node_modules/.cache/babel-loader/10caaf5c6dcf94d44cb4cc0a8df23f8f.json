{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FABIARIAS\\\\Desktop\\\\Sprint5\\\\appfrontend\\\\src\\\\components\\\\FacturasCrear.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class FacturasCrear extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      idfactura: '',\n      fecha: new Date(),\n      identificacion: '',\n      nombre: '',\n      direccion: '',\n      telefono: '',\n      idproducto: '',\n      vendedor: '',\n      cantidad: '',\n      precio: '',\n      userSelected: '',\n      users: [],\n      editing: false,\n      _id: ''\n    };\n\n    this.onSubmit = async e => {\n      e.preventDefault();\n\n      if (this.state.editing) {\n        var factura = document.getElementById('idfactura');\n        const updatedFactura = {\n          idfactura: this.state.idfactura,\n          fecha: this.state.fecha,\n          identificacion: this.state.identificacion,\n          nombre: this.state.nombre,\n          direccion: this.state.direccion,\n          telefono: this.state.telefono,\n          idproducto: this.state.idproducto,\n          vendedor: this.state.userSelected,\n          cantidad: this.state.cantidad,\n          precio: this.state.precio\n        };\n        await axios.put('http://localhost:4000/api/facturas/' + this.state._id, updatedFactura);\n      } else {\n        const newFactura = {\n          idfactura: this.state.idfactura,\n          fecha: this.state.fecha,\n          identificacion: this.state.identificacion,\n          nombre: this.state.nombre,\n          direccion: this.state.direccion,\n          telefono: this.state.telefono,\n          idproducto: this.state.idproducto,\n          vendedor: this.state.userSelected,\n          cantidad: this.state.cantidad,\n          precio: this.state.precio\n        };\n        axios.post('http://localhost:4000/api/facturas', newFactura);\n      }\n\n      window.location.href = '/facturaslista';\n    };\n\n    this.onInputChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.onChangeDate = fecha => {\n      this.setState({\n        fecha\n      });\n    };\n  }\n\n  async componentDidMount() {\n    const res = await axios.get('http://localhost:4000/api/users');\n\n    if (res.data.length > 0) {\n      this.setState({\n        users: res.data.map(user => user.nombres),\n        userSelected: res.data[0].nombres\n      });\n    }\n\n    if (this.props.match.params.id) {\n      console.log(this.props.match.params.id);\n      const res = await axios.get('http://localhost:4000/api/facturas/' + this.props.match.params.id);\n      console.log(res.data);\n      this.setState({\n        idfactura: res.data.idfactura,\n        fecha: new Date(res.data.fecha),\n        identificacion: res.data.identificacion,\n        nombre: res.data.nombre,\n        direccion: res.data.direccion,\n        telefono: res.data.telefono,\n        idproducto: res.data.idproducto,\n        //vendedor:this.data.vendedor,\n        cantidad: res.data.cantidad,\n        precio: res.data.precio,\n        userSelected: res.data.vendedor,\n        _id: res.data._id,\n        editing: true\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"CREAR FACTURAS \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.onSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"vendedor\",\n              children: \"Vendedor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-control\",\n              value: this.state.userSelected,\n              onChange: this.onInputChange,\n              name: \"userSelected\",\n              id: \"userSelected\",\n              required: true,\n              children: this.state.users.map(user => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: user,\n                children: user\n              }, user, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"factura\",\n              children: \"Factura\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              class: \"form-control\",\n              name: \"idfactura\",\n              value: this.state.idfactura,\n              onChange: this.onInputChange,\n              id: \"factura\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"fecha\",\n              children: \"Fecha\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n              className: \"form-form-control\",\n              selected: this.state.fecha,\n              onChange: this.onChangeDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"identificacion\",\n              children: \"identificaci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              class: \"form-control\",\n              name: \"identificacion\",\n              value: this.state.identificacion,\n              onChange: this.onInputChange,\n              id: \"identificacion\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"nombre\",\n              children: \"Nombre Cliente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              class: \"form-control\",\n              name: \"nombre\",\n              value: this.state.nombre,\n              onChange: this.onInputChange,\n              id: \"nombre\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"direccion\",\n              children: \"Direcci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              class: \"form-control\",\n              name: \"direccion\",\n              value: this.state.direccion,\n              onChange: this.onInputChange,\n              id: \"direccion\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"telefono\",\n              children: \"Tel\\xE9fono\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              class: \"form-control\",\n              name: \"telefono\",\n              value: this.state.telefono,\n              onChange: this.onInputChange,\n              id: \"telefono\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"idproducto\",\n              children: \"ID Producto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              class: \"form-control\",\n              name: \"idproducto\",\n              value: this.state.idproducto,\n              onChange: this.onInputChange,\n              id: \"idproducto\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"cantidad\",\n              children: \"Cantidad\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              class: \"form-control\",\n              name: \"cantidad\",\n              value: this.state.cantidad,\n              onChange: this.onInputChange,\n              id: \"cantidad\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"precio\",\n              children: \"Precio de venta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              class: \"form-control\",\n              name: \"precio\",\n              value: this.state.precio,\n              onChange: this.onInputChange,\n              id: \"precio\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary\",\n            children: \"Grabar Factura\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/FABIARIAS/Desktop/Sprint5/appfrontend/src/components/FacturasCrear.js"],"names":["React","Component","axios","DatePicker","FacturasCrear","state","idfactura","fecha","Date","identificacion","nombre","direccion","telefono","idproducto","vendedor","cantidad","precio","userSelected","users","editing","_id","onSubmit","e","preventDefault","factura","document","getElementById","updatedFactura","put","newFactura","post","window","location","href","onInputChange","setState","target","name","value","onChangeDate","componentDidMount","res","get","data","length","map","user","nombres","props","match","params","id","console","log","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\n\r\n\r\nexport default class FacturasCrear extends Component {\r\n\r\n\r\n    state = {\r\n        idfactura:'',\r\n        fecha:new Date(),\r\n        identificacion:'',\r\n        nombre:'',\r\n        direccion:'',\r\n        telefono:'',\r\n        idproducto:'',\r\n        vendedor:'',\r\n        cantidad:'',\r\n        precio:'',\r\n        userSelected: '',\r\n        users: [],\r\n        editing: false,\r\n        _id: ''\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const res = await axios.get('http://localhost:4000/api/users');\r\n        if (res.data.length > 0) {\r\n            this.setState({\r\n                users: res.data.map(user => user.nombres),\r\n                userSelected: res.data[0].nombres\r\n            })\r\n        }\r\n        if (this.props.match.params.id) {\r\n            console.log(this.props.match.params.id)\r\n            const res = await axios.get('http://localhost:4000/api/facturas/' + this.props.match.params.id);\r\n            console.log(res.data)\r\n            this.setState({\r\n                idfactura: res.data.idfactura,\r\n                fecha: new Date(res.data.fecha),\r\n                identificacion: res.data.identificacion,\r\n                nombre: res.data.nombre,\r\n                direccion:res.data.direccion,\r\n                telefono:res.data.telefono,\r\n                idproducto:res.data.idproducto,\r\n                //vendedor:this.data.vendedor,\r\n                cantidad:res.data.cantidad,\r\n                precio:res.data.precio,\r\n                userSelected:res.data.vendedor,\r\n                _id: res.data._id,\r\n                editing: true\r\n           });\r\n        }\r\n    }\r\n\r\n\r\n\r\n    onSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (this.state.editing) {\r\n            var factura=document.getElementById('idfactura')\r\n            const updatedFactura = {\r\n                idfactura: this.state.idfactura,\r\n                fecha: this.state.fecha,\r\n                identificacion: this.state.identificacion,\r\n                nombre: this.state.nombre,\r\n                direccion: this.state.direccion,\r\n                telefono: this.state.telefono,\r\n                idproducto: this.state.idproducto,\r\n                vendedor:this.state.userSelected,\r\n                cantidad: this.state.cantidad,\r\n                precio: this.state.precio\r\n\r\n            };\r\n            await axios.put('http://localhost:4000/api/facturas/' + this.state._id, updatedFactura);\r\n\r\n        } else {\r\n            const newFactura = {\r\n                idfactura: this.state.idfactura,\r\n                fecha: this.state.fecha,\r\n                identificacion: this.state.identificacion,\r\n                nombre: this.state.nombre,\r\n                direccion: this.state.direccion,\r\n                telefono: this.state.telefono,\r\n                idproducto: this.state.idproducto,\r\n                vendedor:this.state.userSelected,\r\n                cantidad: this.state.cantidad,\r\n                precio: this.state.precio\r\n            };\r\n            axios.post('http://localhost:4000/api/facturas', newFactura);\r\n\r\n        }\r\n        window.location.href = '/facturaslista';\r\n\r\n    }\r\n\r\n    onInputChange = (e) => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    onChangeDate = fecha => {\r\n        this.setState({ fecha });\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"col-md-12\">\r\n                <div className=\"card card-body\">\r\n                    <h4>CREAR FACTURAS </h4>\r\n                    {/** SELECCIONE VENDEDOR */}\r\n                    <form onSubmit={this.onSubmit}>\r\n                        <div className=\"form-group\">\r\n                            <label for=\"vendedor\">Vendedor</label>\r\n                            <select className=\"form-control\"\r\n                                value={this.state.userSelected}\r\n                                onChange={this.onInputChange}\r\n                                name=\"userSelected\" id=\"userSelected\" required>\r\n                                {\r\n                                    this.state.users.map(user => (\r\n                                        <option key={user} value={user}>\r\n                                            {user}\r\n                                        </option>\r\n                                    ))\r\n                                }\r\n\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <label for=\"factura\">Factura</label>\r\n                            <input type=\"text\" class=\"form-control\" name=\"idfactura\"\r\n                                value={this.state.idfactura}\r\n                                onChange={this.onInputChange}\r\n                                id=\"factura\"\r\n                                required />\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <label for=\"fecha\">Fecha</label>\r\n                            <DatePicker\r\n                                className=\"form-form-control\" selected={this.state.fecha} onChange={this.onChangeDate} />\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <label for=\"identificacion\">identificación</label>\r\n                            <input type=\"text\" class=\"form-control\" name=\"identificacion\"\r\n                                value={this.state.identificacion}\r\n                                onChange={this.onInputChange}\r\n                                id=\"identificacion\"\r\n                                required />\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <label for=\"nombre\">Nombre Cliente</label>\r\n                            <input type=\"text\" class=\"form-control\" name=\"nombre\"\r\n                                value={this.state.nombre}\r\n                                onChange={this.onInputChange}\r\n                                id=\"nombre\"\r\n                                required />\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <label for=\"direccion\">Dirección</label>\r\n                            <input type=\"text\" class=\"form-control\" name=\"direccion\"\r\n                                value={this.state.direccion}\r\n                                onChange={this.onInputChange}\r\n                                id=\"direccion\"\r\n                                required />\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <label for=\"telefono\">Teléfono</label>\r\n                            <input type=\"text\" class=\"form-control\" name=\"telefono\"\r\n                                value={this.state.telefono}\r\n                                onChange={this.onInputChange}\r\n                                id=\"telefono\"\r\n                                required />\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <label for=\"idproducto\">ID Producto</label>\r\n                            <input type=\"text\" class=\"form-control\" name=\"idproducto\"\r\n                                value={this.state.idproducto}\r\n                                onChange={this.onInputChange}\r\n                                id=\"idproducto\"\r\n                                required />\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <label for=\"cantidad\">Cantidad</label>\r\n                            <input type=\"text\" class=\"form-control\" name=\"cantidad\"\r\n                                value={this.state.cantidad}\r\n                                onChange={this.onInputChange}\r\n                                id=\"cantidad\"\r\n                                required />\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <label for=\"precio\">Precio de venta</label>\r\n                            <input type=\"text\" class=\"form-control\" name=\"precio\"\r\n                                value={this.state.precio}\r\n                                onChange={this.onInputChange}\r\n                                id=\"precio\"\r\n                                required />\r\n                        </div>\r\n\r\n\r\n\r\n\r\n                        <button type=\"submit\" className=\"btn btn-primary\">\r\n                            Grabar Factura\r\n                        </button>\r\n\r\n                    </form>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}